#!/bin/bash
# ccuse - Unified CLI wrapper for ccuseidgets
#
# Usage: ccuse <command> [args...]

set -euo pipefail

show_help() {
    cat << 'EOF'
ccuse - Claude Code Widgets CLI

USAGE:
    ccuse <command> [args...]

COMMANDS:
    usage, pace     Claude usage with pace calculation
    widget          Claude usage compact widget (dots)
    context         Context window percentage (stdin)
    git-files       Git file status (+added ~modified -deleted)
    git-lines       Git diff line counts (+added -removed)

OPTIONS:
    -h, --help      Show this help

EXAMPLES:
    ccuse usage --pretty    # Human-readable Claude usage
    ccuse usage -w          # Interactive mode (auto-reload 20min, 'r' to refresh)
    ccuse widget            # Compact dot indicator
    ccuse git-files         # Show file changes

For detailed help on each command, see the README in each script folder.
EOF
}

case "${1:-}" in
    usage|pace)
        shift
        if [ $# -eq 0 ]; then
            exec claude-pace --pretty
        fi
        exec claude-pace "$@"
        ;;
    widget)
        shift
        exec claude-usage-widget.sh "$@"
        ;;
    context)
        shift
        exec context-pct.sh "$@"
        ;;
    git-files)
        shift
        exec git-files.sh "$@"
        ;;
    git-lines)
        shift
        exec git-lines.sh "$@"
        ;;
    -h|--help|help)
        show_help
        ;;
    "")
        show_help
        exit 1
        ;;
    *)
        echo "Unknown command: $1"
        echo "Run 'ccuse --help' for usage."
        exit 1
        ;;
esac
